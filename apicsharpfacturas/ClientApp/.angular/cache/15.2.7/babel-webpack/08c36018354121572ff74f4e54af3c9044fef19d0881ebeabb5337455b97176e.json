{"ast":null,"code":"import { ClientEntity } from 'src/app/models/ClientEntity';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/client.service\";\nimport * as i3 from \"src/app/services/product.service\";\nimport * as i4 from \"src/app/services/bill.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction BillCreateComponent_tr_58_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"div\")(11, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function BillCreateComponent_tr_58_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToList(product_r1));\n    });\n    i0.ɵɵtext(12, \"+\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1 == null ? null : product_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1 == null ? null : product_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1 == null ? null : product_r1.model);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1 == null ? null : product_r1.price);\n  }\n}\nexport class BillCreateComponent {\n  // =============== constructor ===============\n  // inject dependencies within the constructor \n  constructor(route, clientService, productService, dillService) {\n    this.route = route;\n    this.clientService = clientService;\n    this.productService = productService;\n    this.dillService = dillService;\n    this.clientId = '';\n    this.currentClient = new ClientEntity();\n    // list of products \n    this.productList = [];\n    // public list of detail \n    this.detailList = [];\n    // products to purchase\n    this.wantedProducts = [];\n    // extract id from route\n    this.route.params.subscribe({\n      next: params => {\n        this.clientId = params['id'];\n      },\n      error: ex => {\n        console.log(\"Error when trying to get the request client from back-end api\");\n        console.log(ex);\n      }\n    });\n    // make request to back-end for client\n    this.clientService.getById(this.clientId).subscribe({\n      next: res => {\n        // set response to the currentClient variable\n        this.currentClient = res;\n        console.log(\"detalles del cliente. \");\n        console.log(this.currentClient);\n      },\n      error: ex => {\n        console.log(\"Error al intentar obtener los datos del cliente\");\n        console.log(ex);\n      }\n    });\n    // make request for product list \n    this.productService.getAll().subscribe({\n      next: res => {\n        this.productList = res;\n        console.log(\"List of products map to details: \");\n        console.log(this.detailList);\n        // this.detailList[0].ProductEntity?.id\n      },\n\n      error: ex => {\n        console.log(\"Error when trying to get products from back-end api\");\n        console.log(ex);\n      }\n    });\n  }\n  addToList(p) {\n    // checke if product already exists\n    if (this.wantedProducts.includes(p)) {\n      console.log(\"product exist\");\n    } else {\n      this.wantedProducts.push(p);\n      console.log(\"adding product.... \");\n    }\n    console.log(this.wantedProducts);\n  }\n}\nBillCreateComponent.ɵfac = function BillCreateComponent_Factory(t) {\n  return new (t || BillCreateComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ClientService), i0.ɵɵdirectiveInject(i3.ProductService), i0.ɵɵdirectiveInject(i4.BillService));\n};\nBillCreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: BillCreateComponent,\n  selectors: [[\"app-bill-create\"]],\n  decls: 59,\n  vars: 7,\n  consts: [[1, \"container-fluid\"], [\"routerLink\", \"../../\"], [1, \"container\"], [1, \"row\"], [1, \"mt-3\", \"mb-3\", \"col-md-6\"], [2, \"font-weight\", \"bold\"], [1, \"mt-3\", \"col-md-6\"], [1, \"mb-3\"], [\"type\", \"datetime-local\", 1, \"form-control\"], [1, \"container\", \"mt-5\"], [1, \"mt-5\"], [2, \"height\", \"380px\", \"overflow-y\", \"scroll\"], [1, \"table\", \"table-stripe\", \"table-dark\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n  template: function BillCreateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"a\", 1);\n      i0.ɵɵtext(2, \"<- \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"h3\");\n      i0.ɵɵtext(5, \"Crear Nueva Factura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 3)(7, \"div\", 4)(8, \"p\")(9, \"span\", 5);\n      i0.ɵɵtext(10, \"Id: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"p\")(13, \"span\", 5);\n      i0.ɵɵtext(14, \"Nombres:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"p\")(17, \"span\", 5);\n      i0.ɵɵtext(18, \"Apellidos:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(20, \"form\", 6)(21, \"div\", 7)(22, \"label\");\n      i0.ɵɵtext(23, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"div\", 7)(26, \"p\")(27, \"span\", 5);\n      i0.ɵɵtext(28, \"Subtotal:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"div\", 7)(31, \"p\")(32, \"span\", 5);\n      i0.ɵɵtext(33, \"Descuento:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(35, \"div\", 7)(36, \"p\")(37, \"span\", 5);\n      i0.ɵɵtext(38, \"Total a pagar:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(40, \"div\", 9)(41, \"h4\", 10);\n      i0.ɵɵtext(42, \"Productos Disponibles\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"div\", 11)(44, \"table\", 12)(45, \"thead\")(46, \"tr\")(47, \"th\", 13);\n      i0.ɵɵtext(48, \"Id\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\", 13);\n      i0.ɵɵtext(50, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"th\", 13);\n      i0.ɵɵtext(52, \"Modelo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(53, \"th\", 13);\n      i0.ɵɵtext(54, \"precio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(55, \"th\", 13);\n      i0.ɵɵtext(56, \"Acciones\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(57, \"tbody\");\n      i0.ɵɵtemplate(58, BillCreateComponent_tr_58_Template, 13, 4, \"tr\", 14);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(ctx.currentClient.id);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.currentClient.names, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.currentClient.lastnames, \"\");\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate1(\" \", 0, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", 0, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", 0, \"\");\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngForOf\", ctx.productList);\n    }\n  },\n  dependencies: [i5.NgForOf, i1.RouterLink, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ClientEntity","i0","BillCreateComponent","constructor","route","clientService","productService","dillService","params","subscribe","next","clientId","error","ex","console","log","getById","res","currentClient","getAll","productList","detailList","addToList","p","wantedProducts","includes","push","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["d:\\INFOC\\Escritorio\\apifacturas\\apicsharpfacturas\\ClientApp\\src\\app\\billing\\bill-create\\bill-create.component.ts","d:\\INFOC\\Escritorio\\apifacturas\\apicsharpfacturas\\ClientApp\\src\\app\\billing\\bill-create\\bill-create.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ClientEntity } from 'src/app/models/ClientEntity';\r\nimport { ProductEntity } from 'src/app/models/ProductEntity';\r\nimport { ClientService } from 'src/app/services/client.service';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { BillService } from 'src/app/services/bill.service';\r\nimport { BillDetailEntity } from 'src/app/models/BillDetailEntity';\r\nimport { filter } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-bill-create',\r\n  templateUrl: './bill-create.component.html',\r\n  styleUrls: ['./bill-create.component.css']\r\n})\r\nexport class BillCreateComponent {\r\n\r\n  public clientId = '';\r\n  public currentClient: ClientEntity = new ClientEntity();\r\n  // list of products \r\n  public productList: ProductEntity[] = [\r\n    \r\n  ];\r\n  // public list of detail \r\n  public detailList: BillDetailEntity[] = []\r\n  // products to purchase\r\n  public wantedProducts: ProductEntity[] = [];\r\n\r\n\r\n  // =============== constructor ===============\r\n  // inject dependencies within the constructor \r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private clientService: ClientService,\r\n    private productService: ProductService,\r\n    private dillService: BillService\r\n  ) {\r\n\r\n    // extract id from route\r\n    this.route.params.subscribe({\r\n      next: (params) => {\r\n        this.clientId = params['id'];\r\n      },\r\n      error: (ex) => {\r\n        console.log(\"Error when trying to get the request client from back-end api\");\r\n        console.log(ex);\r\n      }\r\n    });\r\n\r\n    // make request to back-end for client\r\n    this.clientService.getById(this.clientId).subscribe({\r\n      next: (res: any) => {\r\n        // set response to the currentClient variable\r\n        this.currentClient = res;\r\n        console.log(\"detalles del cliente. \");\r\n        console.log(this.currentClient);\r\n      },\r\n      error: (ex: any) => {\r\n        console.log(\"Error al intentar obtener los datos del cliente\");\r\n        console.log(ex);\r\n      }\r\n    });\r\n\r\n    // make request for product list \r\n    this.productService.getAll().subscribe({\r\n      next: (res: any) => {\r\n        this.productList = res;\r\n        console.log(\"List of products map to details: \");\r\n\r\n        console.log(this.detailList);\r\n\r\n        // this.detailList[0].ProductEntity?.id\r\n\r\n      },\r\n      error: (ex: any) => {\r\n        console.log(\"Error when trying to get products from back-end api\");\r\n        console.log(ex);\r\n      }\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  addToList(p: ProductEntity){\r\n\r\n  // checke if product already exists\r\n  if( this.wantedProducts.includes(p) ){\r\n    console.log(\"product exist\");\r\n  }else{\r\n    this.wantedProducts.push(p);    \r\n    console.log(\"adding product.... \");\r\n  }\r\nconsole.log(this.wantedProducts);\r\n  }\r\n\r\n}\r\n","<div class=\"container-fluid\">\r\n\r\n    <a routerLink=\"../../\"><- </a>\r\n</div>\r\n\r\n\r\n<div class=\"container\">\r\n\r\n    <h3>Crear Nueva Factura</h3>\r\n    <div class=\"row\">\r\n        <div class=\"mt-3 mb-3 col-md-6\">\r\n            <p><span style=\"font-weight: bold;\">Id: </span>{{ currentClient.id }}</p>\r\n            <p><span style=\"font-weight: bold;\">Nombres:</span> {{ currentClient.names }}</p>\r\n            <p><span style=\"font-weight: bold;\">Apellidos:</span> {{ currentClient.lastnames }}</p>\r\n        </div>\r\n\r\n        <form class=\"mt-3 col-md-6 \">\r\n\r\n            <div class=\"mb-3\">\r\n                <label>Fecha</label>\r\n                <input class=\"form-control\" type=\"datetime-local\">\r\n            </div>\r\n            <div class=\"mb-3\">\r\n                <p><span style=\"font-weight: bold;\">Subtotal:</span> {{ 0 }}</p>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n                <p><span style=\"font-weight: bold;\">Descuento:</span> {{ 0 }}</p>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n                <p><span style=\"font-weight: bold;\">Total a pagar:</span> {{ 0 }}</p>\r\n            </div>\r\n\r\n        </form>\r\n    </div>\r\n\r\n\r\n    <div class=\"container mt-5\">\r\n\r\n\r\n        <h4 class=\"mt-5\">Productos Disponibles</h4>\r\n\r\n        <div style=\"height: 380px; overflow-y: scroll;\">\r\n            <table class=\"table table-stripe table-dark\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Id</th>\r\n                        <th scope=\"col\">Nombre</th>\r\n                        <th scope=\"col\">Modelo</th>\r\n                        <th scope=\"col\">precio</th>\r\n                        <th scope=\"col\">Acciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor=\"let product of productList\">\r\n\r\n                        <td>{{ product?.id }}</td>\r\n                        <td>{{ product?.name }}</td>\r\n                        <td>{{ product?.model }}</td>\r\n                        <td>{{ product?.price }}</td>\r\n                        <td>\r\n                            <div>\r\n                                <button (click)=\"addToList(product)\">+</button>\r\n\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n\r\n\r\n                </tbody>\r\n            </table>\r\n\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}